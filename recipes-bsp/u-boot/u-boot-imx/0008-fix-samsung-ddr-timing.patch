From 6a38b54dfbbeac6fb4ba245c5ea98144d06a4fb3 Mon Sep 17 00:00:00 2001
From: Matteo Lisi <matteo.lisi@engicam.com>
Date: Fri, 7 Jun 2019 14:33:47 +0200
Subject: [PATCH 8/8] fix-samsung-ddr-timing

---
 board/engicam/icore_mx8mm/lpddr4_timing.c | 82 +++++++++++------------
 1 file changed, 41 insertions(+), 41 deletions(-)

diff --git a/board/engicam/icore_mx8mm/lpddr4_timing.c b/board/engicam/icore_mx8mm/lpddr4_timing.c
index 135c021..c3d0900 100755
--- a/board/engicam/icore_mx8mm/lpddr4_timing.c
+++ b/board/engicam/icore_mx8mm/lpddr4_timing.c
@@ -14,7 +14,7 @@ struct dram_cfg_param ddr_ddrc_cfg[] = {
 	/** Initialize DDRC registers **/
 	{0x3d400304,0x1},
 	{0x3d400030,0x1},
-	{0x3d400000,0xa1080020},
+	{0x3d400000,0xa3080020},
 	{0x3d400020,0x223},
 	{0x3d400024,0x3a980},
 	{0x3d400064,0x5b0087},
@@ -49,12 +49,12 @@ struct dram_cfg_param ddr_ddrc_cfg[] = {
 	{0x3d4001c4,0x0},
 	{0x3d4000f4,0xc99},
 	{0x3d400108,0x70e1617},
-	{0x3d400200,0x1f},
+	{0x3d400200,0x17},
 	{0x3d40020c,0x0},
 	{0x3d400210,0x1f1f},
 	{0x3d400204,0x80808},
 	{0x3d400214,0x7070707},
-	{0x3d400218,0xf070707},
+	{0x3d400218,0x7070707},
 	{0x3d400250,0x29001701},
 	{0x3d400254,0x2c},
 	{0x3d40025c,0x4000030},
@@ -71,9 +71,9 @@ struct dram_cfg_param ddr_ddrc_cfg[] = {
 	{0x3d402050,0x20d040},
 	{0x3d402064,0xc0012},
 	{0x3d4020dc,0x840000},
-	{0x3d4020e0,0x310000},
-	{0x3d4020e8,0x66004d},
-	{0x3d4020ec,0x16004d},
+	{0x3d4020e0,0x210000},
+	{0x3d4020e8,0x44004d},
+	{0x3d4020ec,0x14004d},
 	{0x3d402100,0xa050305},
 	{0x3d402104,0x30407},
 	{0x3d402108,0x203060b},
@@ -95,9 +95,9 @@ struct dram_cfg_param ddr_ddrc_cfg[] = {
 	{0x3d403050,0x20d040},
 	{0x3d403064,0x30005},
 	{0x3d4030dc,0x840000},
-	{0x3d4030e0,0x310000},
-	{0x3d4030e8,0x66004d},
-	{0x3d4030ec,0x16004d},
+	{0x3d4030e0,0x210000},
+	{0x3d4030e8,0x44004d},
+	{0x3d4030ec,0x14004d},
 	{0x3d403100,0xa020102},
 	{0x3d403104,0x30404},
 	{0x3d403108,0x203060b},
@@ -1054,7 +1054,7 @@ struct dram_cfg_param ddr_fsp0_cfg[] = {
 	{0x54009,0xc8},
 	{0x5400b,0x2},
 	{0x5400d,0x100},
-	{0x54012,0x110},
+	{0x54012,0x310},
 	{0x54019,0x2dd4},
 	{0x5401a,0x21},
 	{0x5401b,0x4d44},
@@ -1066,7 +1066,7 @@ struct dram_cfg_param ddr_fsp0_cfg[] = {
 	{0x54022,0x4d00},
 	{0x54024,0x14},
 	{0x5402b,0x1000},
-	{0x5402c,0x1},
+	{0x5402c,0x3},
 	{0x54032,0xd400},
 	{0x54033,0x212d},
 	{0x54034,0x4400},
@@ -1095,31 +1095,31 @@ struct dram_cfg_param ddr_fsp1_cfg[] = {
 	{0x54009,0xc8},
 	{0x5400b,0x2},
 	{0x5400d,0x100},
-	{0x54012,0x110},
+	{0x54012,0x310},
 	{0x54019,0x84},
-	{0x5401a,0x31},
-	{0x5401b,0x4d66},
+	{0x5401a,0x21},
+	{0x5401b,0x4d44},
 	{0x5401c,0x4d00},
-	{0x5401e,0x16},
+	{0x5401e,0x14},
 	{0x5401f,0x84},
-	{0x54020,0x31},
-	{0x54021,0x4d66},
+	{0x54020,0x21},
+	{0x54021,0x4d44},
 	{0x54022,0x4d00},
-	{0x54024,0x16},
+	{0x54024,0x14},
 	{0x5402b,0x1000},
-	{0x5402c,0x1},
+	{0x5402c,0x3},
 	{0x54032,0x8400},
-	{0x54033,0x3100},
-	{0x54034,0x6600},
+	{0x54033,0x2100},
+	{0x54034,0x4400},
 	{0x54035,0x4d},
 	{0x54036,0x4d},
-	{0x54037,0x1600},
+	{0x54037,0x1400},
 	{0x54038,0x8400},
-	{0x54039,0x3100},
-	{0x5403a,0x6600},
+	{0x54039,0x2100},
+	{0x5403a,0x4400},
 	{0x5403b,0x4d},
 	{0x5403c,0x4d},
-	{0x5403d,0x1600},
+	{0x5403d,0x1400},
 	{0xd0000, 0x1},
 };

@@ -1136,31 +1136,31 @@ struct dram_cfg_param ddr_fsp2_cfg[] = {
 	{0x54009,0xc8},
 	{0x5400b,0x2},
 	{0x5400d,0x100},
-	{0x54012,0x110},
+	{0x54012,0x310},
 	{0x54019,0x84},
-	{0x5401a,0x31},
-	{0x5401b,0x4d66},
+	{0x5401a,0x21},
+	{0x5401b,0x4d44},
 	{0x5401c,0x4d00},
-	{0x5401e,0x16},
+	{0x5401e,0x14},
 	{0x5401f,0x84},
-	{0x54020,0x31},
-	{0x54021,0x4d66},
+	{0x54020,0x21},
+	{0x54021,0x4d44},
 	{0x54022,0x4d00},
-	{0x54024,0x16},
+	{0x54024,0x14},
 	{0x5402b,0x1000},
-	{0x5402c,0x1},
+	{0x5402c,0x3},
 	{0x54032,0x8400},
-	{0x54033,0x3100},
-	{0x54034,0x6600},
+	{0x54033,0x2100},
+	{0x54034,0x4400},
 	{0x54035,0x4d},
 	{0x54036,0x4d},
-	{0x54037,0x1600},
+	{0x54037,0x1400},
 	{0x54038,0x8400},
-	{0x54039,0x3100},
-	{0x5403a,0x6600},
+	{0x54039,0x2100},
+	{0x5403a,0x4400},
 	{0x5403b,0x4d},
 	{0x5403c,0x4d},
-	{0x5403d,0x1600},
+	{0x5403d,0x1400},
 	{0xd0000, 0x1},
 };

@@ -1177,7 +1177,7 @@ struct dram_cfg_param ddr_fsp0_2d_cfg[] = {
 	{0x5400b,0x2},
 	{0x5400f,0x100},
 	{0x54010,0x1f7f},
-	{0x54012,0x110},
+	{0x54012,0x310},
 	{0x54019,0x2dd4},
 	{0x5401a,0x21},
 	{0x5401b,0x4d44},
@@ -1189,7 +1189,7 @@ struct dram_cfg_param ddr_fsp0_2d_cfg[] = {
 	{0x54022,0x4d00},
 	{0x54024,0x14},
 	{0x5402b,0x1000},
-	{0x5402c,0x1},
+	{0x5402c,0x3},
 	{0x54032,0xd400},
 	{0x54033,0x212d},
 	{0x54034,0x4400},
--
2.17.1
